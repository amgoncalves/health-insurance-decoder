<p id="notice"><%= notice %></p>

<p>
  <strong>Name:</strong>
  <%= @plan.name %>
</p>


<div id="cal-form" class="form">
  <%= form_tag(calculate_path, controller: "plans", action: "calculate", remote:true) do%>
      <%= hidden_field_tag(:id, @plan.id)%>
      <p><%= label_tag(:deductibletag, "Remaining Deductible")%>
      <%= number_field_tag(:deductible)%></p>
      <p><%= label_tag(:pricetag, "Price of Service")%>
      <%= number_field_tag(:price)%></p>
      <p><%= label_tag(:choicetag, "Category of Service")%>
      <%= collection_select :treatment, :name, @plan.treatments.where.not(resource_category:"coinsurance"), :id, :name%></p>
      <p><%= radio_button_tag(:network, true)%>
      <%= label_tag(:yesnetwork, "This is an in network provider")%>
      <%= radio_button_tag(:network, false)%>
      <%= label_tag(:nonetwork, "This is an out of network provider")%></p>
      <p><%= submit_tag("Calculate")%></p>
  <%end%>
</div>
<div id="out_of_pocket"></div>

<!-- <script>
  $("#cal-form").on('submit', function(e) {
     e.preventDefault();
     var newValue = $('#out-pocket-pay').val();
     ajaxSubmitCalForm();
  });
  function ajaxSubmitCalForm(){
  console.log($('#cal-form').serialize())
  $.ajax({
    url: '/calculate',
    type: 'POST',
    dataType: "json",
    data: $('#cal-form').serialize(),
    success: function (data) {

      $('#cal-result').html(data.content);
    },
    complete: function (data) {
      console.log(data)
    }
  });
  }
</script> -->

<%= link_to 'Edit', edit_plan_path(@plan) %> |
<%= link_to 'Back', user_path(current_user) %>
